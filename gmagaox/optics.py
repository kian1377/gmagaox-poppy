import poppy
import astropy.units as u

ifp8157_1_correction = -0.013059196*u.mm
fsm_correction = 0*u.mm
ifp14_correction = -0*u.mm

# ifp = intermediate focal plane
# fm = fold mirror
# km = K-mirror
# Roap = Relay OAP
# AOoap = AO bench OAP
distances = {
    'm1_m2':2.026247641994000E+004*u.mm,
    'm2_m3':24883.1*u.mm, 
    # 'm2_m3':(2.026247641994000E+004 + 3.40E+003 + 5.0E+002 + 7.20600E+002)*u.mm,
    'm3_ifp8157':1209.4*u.mm + ifp8157_1_correction,
    # 'm3_ifp8157':1.209399999840676E+003* u.mm + ifp8157_1_correction,
    'ifp8157_Roap1':130.5*u.mm,
    # 'ifp8157_Roap1':1.053507560887781E+002 * u.mm, 
    'Roap1_fm1':50.5 * u.mm, 
    # 'Roap1_fm1':5.919705108376282E+001 * u.mm, 
    'fm1_fsm':80.8 * u.mm, 
    # 'fm1_fsm':8.063695415179517E+001 * u.mm + fsm_correction, 
    'fsm_fm2':40.0 * u.mm, 
    # 'fsm_fm2':4.419423804348961E+001 * u.mm - fsm_correction, 
    'fm2_Roap2':190.9 * u.mm, 
    # 'fm2_Roap2':2.255500407777022E+002 * u.mm, 
    'Roap2_fm3': 53.1 * u.mm, 
    # 'Roap2_fm3': 2.679529124532086E+001 * u.mm, 
    'fm3_ifp14': 170.8 * u.mm + ifp14_correction, 
    # 'fm3_ifp14': 1.723368242067590E+002 * u.mm + ifp14_correction, 
    'ifp14_km1': 89.9 * u.mm, 
    'km1_km2': 30.0 * u.mm, 
    'km2_km3': 30.0 * u.mm, 
    'km3_fm4': 49.4 * u.mm, 
    'fm4_AOoap1': 500.4 * u.mm, 
    'AOoap1_fm5': 448.9 * u.mm, 
    'fm5_fm6': 283.3 * u.mm, 
    'fm6_fm7': 138.6 * u.mm, 
    'fm7_AOoap2': 215.7 * u.mm, 
    'AOoap2_ifp8157': 407.5 * u.mm, 
    'ifp8157_fm8': 160.0 * u.mm, 
    'fm8_AOoap3': 545.7 * u.mm, 
    'AOoap3_woofer': 634.7 * u.mm, 
    'woofer_AOoap4': 1264.1 * u.mm, 
    'AOoap4_fm9': 520.5 * u.mm, 
    'fm9_ifp15': 778.2 * u.mm, 
    'ifp15_fm10': 150.0 * u.mm, 
    'fm10_AOoap5': 945.2 * u.mm, 
    'AOoap5_tweeter': 1119.7 * u.mm, 
    # 'tweeter_': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
    # '': * u.mm, 
}

# focal_lengths = {
#     'm1':3.599999999999712E+004/2*u.mm,
#     'm2':4.163901444921466E+003/2*u.mm,
#     'Roap1':2.433132472580263E+002/2*u.mm,
#     'Roap2':3.701372277947485E+002/2*u.mm,
#     'AOoap1':1.357330553253479E+003/2*u.mm,
#     'AOoap2':8.044841733808617E+002/2*u.mm,
#     'AOoap3':1.400730064037108E+003/2*u.mm,
#     'AOoap4':2.516025185693324E+003/2*u.mm,
#     'AOoap5':2.186222420471610E+003/2*u.mm,
#     # 'f_':,
#     # 'f_':,
#     # 'f_':,
#     # 'f_':,
#     # 'f_':,
#     # 'f_':,
#     # 'f_':,
#     # 'f_':,
# }

focal_lengths = {
    'm1':18000*u.mm,
    'm2':2081.950722*u.mm,
    # 'm2': 2083*u.mm, 
    'Roap1':130.3911762*u.mm,
    'Roap2':315.3732395*u.mm,
    'AOoap1':768.5710054*u.mm,
    'AOoap2':423.6816389*u.mm,
    'AOoap3':722.1402242*u.mm,
    'AOoap4':1432.004705*u.mm,
    'AOoap5':1101.478174*u.mm,
    # 'f_':,
    # 'f_':,
    # 'f_':,
    # 'f_':,
    # 'f_':,
    # 'f_':,
    # 'f_':,
    # 'f_':,
}

planes = {
    'm1':poppy.QuadraticLens(f_lens=focal_lengths['m1'], name='m1'), 
    'm2':poppy.QuadraticLens(f_lens=focal_lengths['m2'], name='m2'),
    'm3':poppy.ScalarTransmission(name='m3'), 
    'ifp8157':poppy.ScalarTransmission(name='ifp8157'), 
    'Roap1':poppy.QuadraticLens(f_lens=focal_lengths['Roap1'], name='Roap1'),
    'fm1':poppy.ScalarTransmission(name='fm1'),
    'fsm':poppy.ScalarTransmission(name='fsm'),
    'fm2':poppy.ScalarTransmission(name='fm2'),
    'Roap2':poppy.QuadraticLens(f_lens=focal_lengths['Roap2'], name='Roap2'),
    'fm3':poppy.ScalarTransmission(name='fm3'),
    'ifp14':poppy.ScalarTransmission(name='ifp14'),
    'km1':poppy.ScalarTransmission(name='km1'),
    'km2':poppy.ScalarTransmission(name='km2'),
    'km3':poppy.ScalarTransmission(name='km3'),
    'fm4':poppy.ScalarTransmission(name='fm4'),
    'AOoap1':poppy.QuadraticLens(f_lens=focal_lengths['AOoap1'], name='AOoap1'),
    'fm5':poppy.ScalarTransmission(name='fm5'),
    'fm6':poppy.ScalarTransmission(name='fm6'),
    'fm7':poppy.ScalarTransmission(name='fm7'),
    'AOoap2':poppy.QuadraticLens(f_lens=focal_lengths['AOoap2'], name='AOoap2'),
    'ifp8157':poppy.ScalarTransmission(name='ifp8157'),
    'fm8':poppy.ScalarTransmission(name='fm8'),
    'AOoap3':poppy.QuadraticLens(f_lens=focal_lengths['AOoap3'], name='AOoap3'),
    'woofer':poppy.ScalarTransmission(name='woofer'),
    'AOoap4':poppy.QuadraticLens(f_lens=focal_lengths['AOoap4'], name='AOoap4'),
    'fm9':poppy.ScalarTransmission(name='fm9'),
    'ifp15':poppy.ScalarTransmission(name='ifp15'),
    'fm10':poppy.ScalarTransmission(name='fm10'),
    'AOoap5':poppy.QuadraticLens(f_lens=focal_lengths['AOoap5'], name='AOoap5'),
    'tweeter':poppy.ScalarTransmission(name='tweeter'),
    # '':,
    # '':,
}
